{"version":3,"sources":["utils/auth.js","utils/api.js","contexts/CurrentUserContext.js","components/ProtectedRoute.js","components/MenuPopup.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/Login.js","components/Register.js","images/ok_icon.svg","images/error_icon.svg","components/InfoTooltip.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/App.js","index.js"],"names":["BASE_URL","checkResponse","res","ok","json","Promise","reject","status","api","config","this","_url","url","headers","fetch","method","then","_onError","inputs","body","JSON","stringify","name","about","cardData","link","cardId","input","avatar","authorization","CurrentUserContext","React","createContext","ProtectedRoute","Component","component","props","loggedIn","to","MenuPopup","className","isOpen","email","onClick","onSignOut","Header","location","useLocation","pathname","text","src","logo","alt","isMenuPopupOpen","onCloseMenuPopup","onOpenMenuPopup","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","liker","cardLikeButtonClassName","style","backgroundImage","onCardClick","type","aria-label","onCardLike","length","onCardDelete","Main","onEditProfile","onAddPlace","cards","map","item","Footer","Login","useState","password","setPassword","setEmail","onSubmit","event","preventDefault","onLogin","noValidate","id","value","onChange","target","required","placeholder","Register","onRegister","InfoTooltip","onClose","isRegistrationSuccessful","okIcon","errorIcon","PopupWithForm","title","children","EditAvatarPopup","inputRef","useRef","useEffect","current","onUpdateAvatar","ref","EditProfilePopup","setName","description","setDescription","onUpdateUser","minLength","maxLength","AddPlacePopup","setLink","ImagePopup","App","history","useHistory","setCurrentUser","setLoggedIn","isInfoTooltipOpen","setIsInfoTooltipOpen","setRegistrationSuccessful","setIsMenuPopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","setCards","all","getUserInfo","getInitialCards","dataUserInfo","dataCards","catch","err","console","log","tokenCheck","closeAllPopups","localStorage","getItem","jwt","token","data","push","handleSignOut","removeItem","Provider","exact","path","onEditAvatar","deleteLike","newCard","state","putLike","deleteCard","answer","filter","auth","setItem","inputAvatar","changeAvatar","updateUser","setUserInfo","postNewCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3504a204.chunk.js","sourcesContent":["export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nconst checkResponse = (res) => {\r\n    if(res.ok) {\r\n        return res.json()\r\n    } \r\n    return Promise.reject(`Ошибка: ${res.status}`) \r\n}\r\n\r\nexport const register = ({password, email}) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n        'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n        password: password,\r\n        email: email,\r\n        })\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const authorize = ({password, email}) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n        'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n        password: password,\r\n        email: email,\r\n        })\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const getContent = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n        }\r\n    })\r\n    .then(checkResponse)\r\n};\r\n","class Api {\r\n    constructor(config) {\r\n        this._url = config.url;\r\n        this.headers = config.headers;\r\n    }\r\n    \r\n    _onError (res) {\r\n        if(res.ok){\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    }\r\n\r\n    getUserInfo () {\r\n        return fetch(`${this._url}users/me`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    getInitialCards () {\r\n        return fetch(`${this._url}cards`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    setUserInfo (inputs) {\r\n        return fetch(`${this._url}users/me`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: inputs.name,\r\n                about: inputs.about\r\n            })\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    postNewCard (cardData) {\r\n        return fetch(`${this._url}cards`, {\r\n            method: 'POST',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: cardData.name,\r\n                link: cardData.link,\r\n            })\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    deleteCard (cardId) {\r\n        return fetch(`${this._url}cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers,\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    putLike (cardId) {\r\n        return fetch(`${this._url}cards/likes/${cardId}`, {\r\n            method: 'PUT',\r\n            headers: this.headers,\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    deleteLike (cardId) {\r\n        return fetch(`${this._url}cards/likes/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers,\r\n        })\r\n        .then(this._onError)\r\n    }\r\n\r\n    changeAvatar (input) {\r\n        return fetch(`${this._url}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                avatar: input.avatar\r\n            })\r\n        })\r\n        .then(this._onError)\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    url: 'https://mesto.nomoreparties.co/v1/cohort-20/',\r\n    headers: {\r\n        authorization: '4ea02280-fa61-4e20-88ce-aa4e93f95126',\r\n        'Content-Type': 'application/json'\r\n    }\r\n});\r\n\r\nexport {api};\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return (\r\n      <Route>\r\n        {() =>\r\n          props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n        }\r\n      </Route>\r\n    );\r\n  };\r\n  \r\n  export default ProtectedRoute;\r\n","import { Link} from 'react-router-dom';\r\n\r\nfunction MenuPopup(props) {\r\n\r\n    return (\r\n        <div className={`navbar__popup-menu ${props.isOpen && 'navbar__popup-menu_opened' }`}>\r\n            <p className=\"navbar__email navbar__email_visible\">{props.email}</p>\r\n            <Link to=\"\" onClick={props.onSignOut} className=\"navbar__link navbar__link_visible navbar__link_popup-menu\">Выйти</Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MenuPopup;\r\n","export default __webpack_public_path__ + \"static/media/logo.be5c04b7.svg\";","import { Link, useLocation } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header(props) {\r\n    const location = useLocation().pathname; // определяем, на какой странице находимся\r\n    const text = (location === \"/sign-in\") ? \"Регистрация\" : \"Войти\";\r\n    const link = (location === \"/sign-in\") ? \"/sign-up\" : \"/sign-in\";\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <img className=\"header__logo\" src={logo} alt=\"Логотип сайта\"/>\r\n            <nav className=\"navbar\">\r\n                {props.loggedIn ?\r\n                    (<>\r\n                        {!props.isMenuPopupOpen ?\r\n                            (<button className=\"navbar__open-menu-button\" onClick={props.onOpenMenuPopup}></button>)\r\n                        :   (<button className=\"navbar__close-menu-button\" onClick={props.onCloseMenuPopup}></button>)\r\n                        }\r\n                        <p className=\"navbar__email\">{props.email}</p>\r\n                        <Link to=\"\" onClick={props.onSignOut} className=\"navbar__link\">Выйти</Link>\r\n                    </>) \r\n                : (<Link to={link} className=\"navbar__link navbar__link_visible\">{text}</Link>)\r\n                }\r\n            </nav>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n    // Подписка на контекст информации о юзере\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isOwn = props.card.owner._id === currentUser._id;\r\n    // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n    const cardDeleteButtonClassName = `card__delete-button ${isOwn && 'card__delete-button_visible'}`;\r\n\r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = props.card.likes.some(liker => liker._id === currentUser._id);\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName = `card__like-button ${isLiked && 'card__like-button_active'}`; \r\n    \r\n\r\n    function handleClick() { //При клике на карточку в конечном счете сработает handleCardClick из компонента App\r\n        props.onCardClick(props.card); // (handleCardClick \"проброшен\" пропсом onCardClick из App через Main сюда)\r\n    }\r\n    function handleLikeClick() {\r\n        props.onCardLike(props.card);\r\n    }\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props.card);\r\n    }  \r\n\r\n    return (\r\n        <article className=\"card\">\r\n            <div className=\"card__photo\" style={{ backgroundImage: `url(${props.card.link})` }} onClick={handleClick}/>\r\n            <div className=\"card__photo-info\">\r\n                <h2 className=\"card__text\">{props.card.name}</h2>\r\n                <div className=\"card__like-container\">\r\n                    <button type=\"button\" aria-label=\"like\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n                    <p className=\"card__likes-number\">{props.card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n            <button type=\"button\" aria-label=\"delete\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\n\r\nfunction Main(props) {\r\n    // подписка на контекст информации о юзере\r\n    const currentUser = useContext(CurrentUserContext);\r\n   \r\n    return (\r\n        <main className=\"content\">\r\n\r\n            <section className=\"profile\">\r\n                <div className=\"profile__avatar-wrapper\" onClick={props.onOpenMenuPopup}>\r\n                    <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}></div>\r\n                    <div className=\"profile__avatar-change\"></div>\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <div className=\"profile__info-edit\">\r\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                        <button type=\"button\" aria-label=\"edit\" className=\"profile__edit-button\" onClick={props.onEditProfile}></button>\r\n                    </div>\r\n                    <p className=\"profile__description\">{currentUser.about}</p>\r\n                </div>\r\n                <button type=\"button\" aria-label=\"add\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\r\n            </section>\r\n\r\n            <section className=\"cards\">\r\n                {\r\n                    props.cards.map(item => ( // jsx оборачиваем в скобки, чтобы избежать проблем с автоматической вставкой точек с запятой\r\n                        <Card card={item} key={item._id} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete}/> //Обязательно передается key, т.к. каждая карточка - элемент списка карточек\r\n                    )\r\n                    )\r\n                }\r\n            </section>\r\n\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className = \"footer__author\">&copy; 2020. Пономарева Полина</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;\r\n","import { useState} from 'react';\r\n\r\nfunction Login(props) {\r\n    const [password, setPassword] = useState('');\r\n    const [email, setEmail] = useState(''); \r\n\r\n    function handleChangePassword (event) {\r\n        setPassword(event.target.value);\r\n    }\r\n\r\n    function handleChangeEmail (event) {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    function handleSubmit (event) {\r\n        event.preventDefault();\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onLogin({password, email});\r\n    }\r\n\r\n    return (\r\n        <form className=\"form\" onSubmit={handleSubmit} noValidate>\r\n            <h2 className=\"form__header form__header_type_enter-page\">Вход</h2>\r\n            <input id=\"email-input\" type=\"email\" value={email} onChange={handleChangeEmail} className=\"form__item form__item_type_enter-page\" name=\"email\" required placeholder=\"Email\"/>\r\n            <span id=\"email-input-error\" className=\"form__item-error\"></span>\r\n            <input id=\"password-input\" type=\"password\" value={password} onChange={handleChangePassword} className=\"form__item form__item_type_enter-page\" name=\"password\" required placeholder=\"Пароль\"/>\r\n            <span id=\"password-input-error\" className=\"form__item-error\"></span>\r\n            <button type=\"submit\" className=\"form__save-button form__save-button_type_enter-page\">Войти</button>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import { useState} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register(props) {\r\n    const [password, setPassword] = useState('');\r\n    const [email, setEmail] = useState(''); \r\n\r\n    function handleChangePassword (event) {\r\n        setPassword(event.target.value);\r\n    }\r\n    function handleChangeEmail (event) {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    function handleSubmit (event) {\r\n        event.preventDefault();\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onRegister({password, email});\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form className=\"form\" onSubmit={handleSubmit} noValidate>\r\n                <h2 className=\"form__header form__header_type_enter-page\">Регистрация</h2>\r\n                <input id=\"email-input\" type=\"email\" value={email} onChange={handleChangeEmail} className=\"form__item form__item_type_enter-page\" name=\"email\" required placeholder=\"Email\"/>\r\n                <span id=\"email-input-error\" className=\"form__item-error\"></span>\r\n                <input id=\"password-input\" type=\"password\" value={password} onChange={handleChangePassword} className=\"form__item form__item_type_enter-page\" name=\"password\" required placeholder=\"Пароль\"/>\r\n                <span id=\"password-input-error\" className=\"form__item-error\"></span>\r\n                <button type=\"submit\" className=\"form__save-button form__save-button_type_enter-page\">Зарегистрироваться</button>\r\n            </form>\r\n            <div className=\"redirection\">\r\n                <p className=\"redirection__text\">Уже зарегистрированы?&nbsp;</p>\r\n                <Link to=\"/sign-in\" className=\"redirection__link\">Войти</Link>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","export default __webpack_public_path__ + \"static/media/ok_icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error_icon.7c6a020b.svg\";","import okIcon from'../images/ok_icon.svg';\r\nimport errorIcon from'../images/error_icon.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n    return (\r\n        <div className={`popup popup_type_tip ${props.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" aria-label=\"close\" className=\"popup__close-button popup__close-button_type_tip\" onClick={props.onClose}></button>\r\n                <div className=\"popup__form-background popup__form-background_type_tip\">\r\n                    {props.isRegistrationSuccessful ?\r\n                        (<>\r\n                            <div className=\"popup__tip-icon\" style={{ backgroundImage: `url(${okIcon})` }}></div>\r\n                            <p className=\"popup__tip-text\">Вы успешно зарегистрировались!</p>\r\n                        </>)\r\n                    :   (<>\r\n                            <div className=\"popup__tip-icon\" style={{ backgroundImage: `url(${errorIcon})` }}></div>\r\n                            <p className=\"popup__tip-text\">Что-то пошло не так! Попробуйте ещё раз.</p>\r\n                        </>)\r\n                }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","function PopupWithForm(props) {\r\n    return (\r\n        <div className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" aria-label=\"close\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n                <div className=\"popup__form-background\">\r\n                    <form className=\"form\" name={`${props.name}-form`} onSubmit={props.onSubmit} noValidate>\r\n                        <h2 className=\"form__header\">{props.title}</h2>\r\n                        {props.children}\r\n                        <button type=\"submit\" className=\"form__save-button\">Сохранить</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import { useRef, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const inputRef = useRef();\r\n\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        props.onUpdateAvatar({\r\n          avatar: inputRef.current.value,\r\n        });\r\n    }\r\n\r\n    useEffect( () => {\r\n        if(!props.isOpen) { // каждый раз при закрытии поп-апа обнуляем поле ввода\r\n            inputRef.current.value = '';\r\n        }\r\n    }, [props.isOpen] )\r\n\r\n    return (\r\n        <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" isOpen={props.isOpen} onSubmit={handleSubmit} onClose={props.onClose}>\r\n            <input id=\"avatar-link-input\" ref={inputRef} type=\"url\" className=\"form__item\" name=\"link\" required placeholder=\"Ссылка на фото\"/>\r\n            <span id=\"avatar-link-input-error\" className=\"form__item-error\"></span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState, useEffect, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup(props) {\r\n    // подписка на контекст информации о юзере\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    function handleChangeName(event) {\r\n        setName(event.target.value);\r\n    }\r\n    function handleChangeDescription(event) {\r\n        setDescription(event.target.value);\r\n    }\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onUpdateUser({\r\n            name: name,\r\n            about: description,\r\n          });\r\n    }\r\n\r\n    // Эффект, вызываемый при монтировании компонента и при обновлении информации о юзере\r\n    useEffect(() => {\r\n        if (currentUser.name) { // избегаем ситуации, когда данные пользователя еще не получены от сервера ( чтобы в стейты не записать undifined)\r\n            setName(currentUser.name);\r\n        }\r\n        if (currentUser.about) {\r\n            setDescription(currentUser.about);\r\n        }\r\n    }, [currentUser, props.isOpen]);\r\n\r\n    return (\r\n        <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" isOpen={props.isOpen} onSubmit={handleSubmit} onClose={props.onClose}>\r\n            <input id=\"name-input\" type=\"text\" value={name} onChange={handleChangeName} className=\"form__item form__item_value_name\" name=\"name\" minLength={2} maxLength={40} required placeholder=\"Имя\"/>\r\n            <span id=\"name-input-error\" className=\"form__item-error\"></span>\r\n            <input id=\"description-input\" type=\"text\" value={description} onChange={handleChangeDescription} className=\"form__item form__item_value_description\" name=\"description\"  minLength={2} maxLength={200} required placeholder=\"О себе\"/>\r\n            <span id=\"description-input-error\" className=\"form__item-error\"></span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import { useState, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n    const [name, setName] = useState('');\r\n    const [link, setLink] = useState('');\r\n\r\n    function handleChangeName (event) {\r\n        setName(event.target.value)\r\n    }\r\n    function handleChangeLink (event) {\r\n        setLink(event.target.value)\r\n    }\r\n\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        props.onAddPlace({\r\n            name, // эквивалентно name: name\r\n            link // link: link \r\n        });\r\n    }\r\n\r\n    useEffect( () => {\r\n        if(!props.isOpen) { // каждый раз при закрытии поп-апа обнуляем поля ввода\r\n            setName('');\r\n            setLink('');\r\n        }\r\n    }, [props.isOpen] )\r\n\r\n    return (\r\n        <PopupWithForm name=\"cards\" title=\"Новое место\" isOpen={props.isOpen} onSubmit={handleSubmit} onClose={props.onClose}>\r\n            <input id=\"place-name-input\" type=\"text\" value={name} onChange={handleChangeName} className=\"form__item form__item_value_place-name\" name=\"title\" minLength={2} maxLength={30} required placeholder=\"Название\"/>\r\n            <span id=\"place-name-input-error\" className=\"form__item-error\"></span>\r\n            <input id=\"link-input\" type=\"url\" value={link} onChange={handleChangeLink} className=\"form__item form__item_value_link\" name=\"link\" required placeholder=\"Ссылка на картинку\"/>\r\n            <span id=\"link-input-error\" className=\"form__item-error\"></span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","function ImagePopup(props) {\r\n    return (\r\n        <div className={`popup popup_type_image ${props.card.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" aria-label=\"close\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n                <img className='popup__photo' src={props.card.link} alt=''/>\r\n                <p className=\"popup__photo-name\">{props.card.name}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport * as auth from '../utils/auth.js';\nimport { api } from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport MenuPopup from './MenuPopup';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport PopupWithForm from './PopupWithForm';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\n\nfunction App() {\n    const history = useHistory();\n    const [currentUser, setCurrentUser] = useState({});\n    // стейты, касающиеся авторизации\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [email, setEmail] = useState('');\n    const [isInfoTooltipOpen,setIsInfoTooltipOpen] = useState(false);\n    const [isRegistrationSuccessful, setRegistrationSuccessful] = useState(false);\n    // стейты, касающиеся поп-апов\n    const [isMenuPopupOpen, setIsMenuPopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen,setIsEditAvatarPopupOpen] = useState(false);\n    const [isEditProfilePopupOpen,setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen,setIsAddPlacePopupOpen] = useState(false);\n\n    const [selectedCard,setSelectedCard] = useState({isOpen: false, link: '', name: ''});\n    const [cards,setCards] = useState([]);\n\n    // Эффект, вызываемый при монтировании компонента\n    useEffect( () => {\n        Promise.all([api.getUserInfo(), api.getInitialCards()])\n            .then(([dataUserInfo, dataCards]) => {\n                // Добавление информации о пользователе с сервера на страницу:\n                setCurrentUser(dataUserInfo); // поля объекта: avatar, name, about, _id и cohort\n                // Добавление существующих на сервере карточек на страницу:\n                setCards(dataCards);\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }, [] )\n\n    // Эффект, вызываемый при обновлении статуса, залогинен юзер или нет. Если залогинен - юзер сразу попадает на свой аккаунт + таким образом обновляется почта\n    useEffect(() => {\n        tokenCheck();\n    }, [loggedIn])\n\n    const handleMenuClick = () => {\n        setIsMenuPopupOpen(true);\n    };\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    };\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    };\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    };\n    const handleCardClick = (card) => {\n        setSelectedCard({isOpen: true, link: card.link,name: card.name });\n    };\n    const closeAllPopups = () => {\n        setIsInfoTooltipOpen(false);\n        setIsMenuPopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setSelectedCard({isOpen: false});\n    }\n\n    // Регистрация\n    const handleRegister = (inputs) => {\n        auth.register(inputs)\n            .then((data) => {\n                if (data) { // если с данными все ок\n                    setRegistrationSuccessful(true);\n                    setIsInfoTooltipOpen(true); // выводим поп-ап с поздравлением\n                    history.push('/sign-in');\n                }\n            })\n            .catch((err) => {\n                setRegistrationSuccessful(false);\n                setIsInfoTooltipOpen(true); // выводим поп-ап с ошибкой\n                console.log(err);\n            });\n    }\n\n    // Авторизация\n    const handleLogin = (inputs) => {\n        auth.authorize(inputs)\n            .then((data) => { \n                if (data.token) { //проверяем, есть ли у пришедших данных токен\n                    localStorage.setItem('jwt', data.token); // сохраняем токен пользователя\n                    setLoggedIn(true);\n                    history.push('/');\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    // Проверка на наличие токена в локальном хранилище\n    const tokenCheck = () => {\n        if (localStorage.getItem('jwt')) {\n            const jwt = localStorage.getItem('jwt');\n            if (jwt) { //если с токеном все ок  \n                auth.getContent(jwt)\n                .then((data) => {\n                    if (data.data.email) { //проверяем, есть ли у пришедших данных емайл\n                        setEmail(data.data.email); // заполняем емайл в шапке аккаунта пользователя\n                        setLoggedIn(true);\n                        history.push('/');\n                    }\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n            }\n        }\n    }\n\n    // Выход из учетной записи\n    const handleSignOut = () => {\n        localStorage.removeItem('jwt');\n        setIsMenuPopupOpen(false); // закрыть меню для моб. версии\n        setLoggedIn(false);\n        setEmail('');\n        history.push('/sign-in');\n    }\n\n\n    // Функции для работы с данными, отображающимися в аккаунте пользователя\n\n    const handleUpdateUser = (inputs) => {\n        api.setUserInfo(inputs)\n            .then((updateUser) => {\n                setCurrentUser(updateUser);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    const handleUpdateAvatar = (inputAvatar) => {\n        api.changeAvatar(inputAvatar)\n            .then((updateUser) => {\n                setCurrentUser(updateUser);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    const handleCardLike = (card) => {\n        // Проверяем, есть ли уже лайк на этой карточке\n        const isLiked = card.likes.some(liker => liker._id === currentUser._id);\n        if (!isLiked) {\n            api.putLike(card._id)\n                .then((newCard) => { // получили данные лайкнутой карточки (лайк уже проставлен)\n                    // в cards записываем новый массив, который получен так:\n                    // в текущем массиве перебираем карточки и когда id одной из карточек совпадает с id нашей карточки,\n                    // менем ее на новую (с лайком)\n                    setCards((state) => state.map((item) => item._id === card._id ? newCard : item)); // state - это текущий стейт (т.е необновленный cards)\n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n\n        } else {\n            api.deleteLike(card._id)\n                .then((newCard) => { //аналогично\n                    setCards((state) => state.map((item) => item._id === card._id ? newCard : item));\n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n        }\n    }\n\n    const handleCardDelete = (card) => {\n        // Определяем, являемся ли мы владельцем карточки\n        const isOwn = card.owner._id === currentUser._id;\n        if (isOwn) {\n            api.deleteCard(card._id)\n                .then((answer) => {\n                    setCards((state) => state.filter((item) => item._id !== card._id));\n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n        }\n    }\n\n    const handleAddPlaceSubmit = (card) => {\n        api.postNewCard(card)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    return (\n        < CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <MenuPopup isOpen={isMenuPopupOpen} email={email} onSignOut={handleSignOut}/>\n                <Header \n                    loggedIn={loggedIn} \n                    email={email} \n                    onSignOut={handleSignOut}\n                    onOpenMenuPopup = {handleMenuClick}\n                    onCloseMenuPopup = {closeAllPopups}\n                    isMenuPopupOpen = {isMenuPopupOpen}\n                />\n                <Switch>\n                    <ProtectedRoute\n                        exact path=\"/\"\n                        loggedIn={loggedIn}\n                        component={Main} \n                        onEditAvatar={handleEditAvatarClick}\n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick} \n                        onCardClick={handleCardClick}\n                        cards={cards}\n                        onCardLike={handleCardLike}\n                        onCardDelete={handleCardDelete}\n                    />\n                    <Route path=\"/sign-in\">\n                        <Login onLogin={handleLogin}/>\n                    </Route>\n                    <Route path=\"/sign-up\">\n                        <Register onRegister={handleRegister}/>\n                    </Route>\n                    <Route>\n                        {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n                    </Route>\n                </Switch>\n                <Footer/>\n\n                <InfoTooltip isOpen={isInfoTooltipOpen} isRegistrationSuccessful={isRegistrationSuccessful} onClose={closeAllPopups}/>\n\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onUpdateAvatar={handleUpdateAvatar} onClose={closeAllPopups}/>\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onUpdateUser={handleUpdateUser} onClose={closeAllPopups}/>\n                <AddPlacePopup  isOpen={isAddPlacePopupOpen} onAddPlace={handleAddPlaceSubmit} onClose={closeAllPopups}/>\n\n                <PopupWithForm name=\"confirm\" title=\"Вы уверены?\"/>\n\n                <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, HashRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}